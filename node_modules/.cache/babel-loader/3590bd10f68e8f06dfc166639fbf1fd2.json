{"ast":null,"code":"var _jsxFileName = \"/Users/santatriniainariantsoaramanampamonjy/Documents/Etudes/Projet/buffa/finder-music/src/components/Home/Song/Song.js\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    marginBottom: '15px'\n  },\n  details: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  content: {\n    flex: '1 0 auto'\n  },\n  cover: {\n    width: 151\n  },\n  controls: {\n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: theme.spacing(1),\n    paddingBottom: theme.spacing(1)\n  },\n  playIcon: {\n    height: 38,\n    width: 38\n  }\n}));\n\nconst Song = props => {\n  var _props$album;\n\n  const [currentSong, setCurrentSong] = useState({\n    song: null,\n    isPlayed: false\n  });\n  const [audio, setAudio] = useState(new Audio(\"\"));\n  const classes = useStyles();\n  const theme = useTheme();\n  useEffect(() => {\n    const currentStatus = { ...currentSong\n    };\n    console.log(\"render\", currentStatus);\n    const isPlayed = !currentStatus.isPlayed;\n    audio.pause();\n  }, [audio], [currentSong]);\n\n  const playSong = song => {\n    setCurrentSong(state => {\n      return {\n        song: song.song,\n        isPlayed: !state.isPlayed\n      };\n    });\n    setAudio(new Audio(song.song.preview));\n\n    if ((currentSong === null || currentSong === void 0 ? void 0 : currentSong._id) === song._id) {\n      currentSong.isPlayed ? audio.play() : audio.pause();\n    }\n  };\n\n  const displayPlay = song => {\n    var _currentSong$song;\n\n    let isPlayed = false;\n\n    if (song._id === (currentSong === null || currentSong === void 0 ? void 0 : (_currentSong$song = currentSong.song) === null || _currentSong$song === void 0 ? void 0 : _currentSong$song._id)) {\n      let currentStatus = { ...currentSong\n      };\n      isPlayed = !currentStatus.isPlayed;\n    }\n\n    if (!isPlayed) {\n      return React.createElement(PlayArrowIcon, {\n        className: classes.playIcon,\n        onClick: () => playSong({\n          song: song,\n          isPlayed: true\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      });\n    } else {\n      return React.createElement(PauseIcon, {\n        className: classes.playIcon,\n        onClick: () => playSong({\n          song: song,\n          isPlayed: false\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      });\n    }\n  };\n\n  const songPlaceHolder = (_props$album = props.album) === null || _props$album === void 0 ? void 0 : _props$album.songs.map((song, index) => {\n    var _props$album$cover;\n\n    return React.createElement(\"div\", {\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: classes.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(CardMedia, {\n      className: classes.cover,\n      image: (_props$album$cover = props.album.cover) === null || _props$album$cover === void 0 ? void 0 : _props$album$cover.medium,\n      title: \"Live from space album cover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: classes.details,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(CardContent, {\n      className: classes.content,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      component: \"h5\",\n      variant: \"h5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, song.title)), React.createElement(\"div\", {\n      className: classes.controls,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      \"aria-label\": \"play/pause\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, displayPlay(song))))));\n  });\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, songPlaceHolder);\n};\n\nexport default Song;","map":{"version":3,"sources":["/Users/santatriniainariantsoaramanampamonjy/Documents/Etudes/Projet/buffa/finder-music/src/components/Home/Song/Song.js"],"names":["React","useState","useEffect","makeStyles","useTheme","Card","CardContent","CardMedia","IconButton","Typography","SkipPreviousIcon","PlayArrowIcon","PauseIcon","SkipNextIcon","useStyles","theme","root","display","marginBottom","details","flexDirection","content","flex","cover","width","controls","alignItems","paddingLeft","spacing","paddingBottom","playIcon","height","Song","props","currentSong","setCurrentSong","song","isPlayed","audio","setAudio","Audio","classes","currentStatus","console","log","pause","playSong","state","preview","_id","play","displayPlay","songPlaceHolder","album","songs","map","index","medium","title"],"mappings":"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","sourcesContent":["import React,{ useState , useEffect } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: 'flex',\n        marginBottom: '15px'\n    },\n    details: {\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    content: {\n        flex: '1 0 auto',\n    },\n    cover: {\n        width: 151,\n    },\n    controls: {\n        display: 'flex',\n        alignItems: 'center',\n        paddingLeft: theme.spacing(1),\n        paddingBottom: theme.spacing(1),\n    },\n    playIcon: {\n        height: 38,\n        width: 38,\n    },\n}));\n\nconst Song= (props) =>{\n    const [currentSong, setCurrentSong] = useState({ song:null,isPlayed:false});\n    const [audio, setAudio] =useState(new Audio(\"\"));\n    const classes = useStyles();\n    const theme = useTheme();\n    useEffect(() => {\n        const currentStatus = {...currentSong};\n        console.log(\"render\" , currentStatus);\n        const isPlayed = !currentStatus.isPlayed;\n        audio.pause();\n      },\n      [audio],[currentSong]\n    );\n    const playSong =(song)=>{\n        setCurrentSong(state=>{\n            return {song : song.song,isPlayed : !state.isPlayed}\n        });\n\n        setAudio(new Audio(song.song.preview));\n\n        if(currentSong?._id === song._id){\n            currentSong.isPlayed? audio.play() : audio.pause();\n            }\n       \n    }\n    const displayPlay = (song)=>{\n        let isPlayed = false;\n\n        if(song._id === currentSong?.song?._id){\n            let currentStatus = {...currentSong};\n            isPlayed = !currentStatus.isPlayed;\n        }\n        if(!isPlayed){\n             return (\n                <PlayArrowIcon className={classes.playIcon} onClick={()=>playSong({song:song,isPlayed: true})}/>\n        \n            )\n        }\n        else{\n            return (<PauseIcon className={classes.playIcon} onClick={()=>playSong({song:song,isPlayed: false})}/>)\n\n        }\n    }\n    const songPlaceHolder = props.album?.songs.map((song, index) => (\n        \n        <div key={index}>\n            <Card className={classes.root}>\n            <CardMedia\n                    className={classes.cover}\n                    image={props.album.cover?.medium}\n                    title=\"Live from space album cover\"\n                />\n                <div className={classes.details}>\n                    <CardContent className={classes.content}>\n                        <Typography component=\"h5\" variant=\"h5\">\n                            {song.title}\n                        </Typography>\n                        \n                    </CardContent>\n                    <div className={classes.controls}>\n                    \n                        <IconButton aria-label=\"play/pause\">\n                            {displayPlay(song)}\n                        </IconButton>\n                        \n                    </div>\n                </div>\n               \n            </Card>\n\n        </div>\n    ));\n    return (\n        \n        <div>\n            {songPlaceHolder}\n\n        </div>\n\n    )\n\n}\nexport default Song;"]},"metadata":{},"sourceType":"module"}